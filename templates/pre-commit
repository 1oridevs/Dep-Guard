#!/bin/sh

# Run Dependency Guardian before commit if package files changed
STAGED_FILES=$(git diff --cached --name-only)

if echo "$STAGED_FILES" | grep -q "package.*\.json\|yarn\.lock"; then
  echo "🛡️ Running Dependency Guardian checks..."
  npx dependency-guardian analyze || {
    echo "❌ Dependency Guardian found issues. Please fix them before committing."
    exit 1
  }
fi

exit 0 